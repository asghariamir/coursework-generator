<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Coursework LaTeX Generator ‚Äî Professional Math Rendering</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
<style>
:root{--ink:#111827;--muted:#6b7280;--primary:#2563eb;--bg:#f9fafb;--card:#fff;--border:#e5e7eb}
*{box-sizing:border-box}
html,body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:var(--bg)}
.container{max-width:1200px;margin:0 auto;padding:20px}
.header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:40px 20px;text-align:center;border-radius:12px;margin-bottom:30px;box-shadow:0 10px 30px rgba(0,0,0,0.1)}
.header h1{margin:0 0 10px;font-size:36px;font-weight:700}
.header p{margin:0;opacity:0.95;font-size:18px}
.card{background:var(--card);border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 4px 6px rgba(0,0,0,0.07)}
.card h2{color:var(--primary);margin:0 0 20px;font-size:24px;display:flex;align-items:center;gap:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin:20px 0}
.input-group{display:flex;flex-direction:column;gap:6px}
.input-group label{font-size:14px;font-weight:600;color:var(--ink)}
.input-group .hint{font-size:12px;color:var(--muted);margin-top:4px}
input,select,textarea{padding:10px 12px;border:1px solid var(--border);border-radius:8px;font-size:15px;background:white;transition:border 0.2s}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,0.1)}
.btn-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:20px}
button{padding:12px 24px;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;transition:all 0.2s}
.btn-primary{background:var(--primary);color:white}
.btn-primary:hover{background:#1d4ed8;transform:translateY(-1px);box-shadow:0 4px 12px rgba(37,99,235,0.2)}
.btn-secondary{background:#10b981;color:white}
.btn-secondary:hover{background:#059669}
.btn-warning{background:#f59e0b;color:white}
.btn-warning:hover{background:#d97706}
.course-selector{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:20px 0}
.course-btn{padding:16px;border:2px solid var(--border);border-radius:8px;background:white;cursor:pointer;transition:all 0.2s;text-align:left}
.course-btn:hover{border-color:var(--primary);background:#f0f4ff}
.course-btn.active{border-color:var(--primary);background:linear-gradient(to right,#f0f4ff,#e6efff);box-shadow:0 2px 8px rgba(37,99,235,0.1)}
.course-btn h3{margin:0 0 4px;color:var(--primary);font-size:16px}
.course-btn p{margin:0;font-size:13px;color:var(--muted)}
.preview-box{background:#1e1e1e;color:#d4d4d4;border-radius:8px;padding:20px;min-height:400px;max-height:600px;overflow-y:auto;font-family:'Courier New',monospace;font-size:13px;line-height:1.5;white-space:pre-wrap}
.latex-code{background:#282c34;color:#abb2bf;padding:1px 4px;border-radius:3px;font-family:'Courier New',monospace}
.info-box{background:#e0f2fe;color:#0c4a6e;padding:16px;border-radius:8px;margin:20px 0;border-left:4px solid #0284c7}
.warning-box{background:#fef2f2;border:1px solid #fecaca;color:#991b1b;padding:16px;border-radius:8px;margin:20px 0}
.success-box{background:#d1fae5;border:1px solid #6ee7b7;color:#065f46;padding:16px;border-radius:8px;margin:20px 0}
.footer{text-align:center;padding:40px 20px;color:var(--muted);font-size:14px}
@media(max-width:600px){
  .grid{grid-template-columns:1fr}
  .course-selector{grid-template-columns:1fr}
  .header h1{font-size:28px}
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>üìù Coursework LaTeX Generator</h1>
    <p>Generate Professional PDF Assignments with Perfect Math Rendering</p>
  </div>

  <div class="card">
    <h2>‚ú® Professional Math Rendering</h2>
    <div class="info-box">
      <strong>LaTeX Output:</strong> This tool generates LaTeX source code for perfect mathematical typesetting.
      Compile the output using Overleaf, LaTeX online, or your local LaTeX installation.
    </div>
    
    <div class="warning-box">
      <strong>‚ö†Ô∏è For Instructors:</strong> Generate all student assignments at once, then compile to PDF using LaTeX.
      Each document includes student name and ID in the header.
    </div>
  </div>

  <div class="card">
    <h2>üîß Generate LaTeX Source</h2>
    
    <div class="grid">
      <div class="input-group">
        <label for="student">Student Name *</label>
        <input id="student" type="text" placeholder="e.g., Alex Johnson" required>
      </div>
      <div class="input-group">
        <label for="sid">Student ID *</label>
        <input id="sid" type="text" placeholder="e.g., 21111438943" required>
        <div class="hint">Full ID for variant calculation</div>
      </div>
    </div>

    <div class="course-selector">
      <div class="course-btn active" data-course="cf" onclick="selectCourse('cf',this)">
        <h3>üìà Dynamical Systems</h3>
        <p>Chaos & Fractals</p>
      </div>
      <div class="course-btn" data-course="nm" onclick="selectCourse('nm',this)">
        <h3>üî¢ Numerical Methods</h3>
        <p>Algorithms & Analysis</p>
      </div>
    </div>

    <div class="grid">
      <div class="input-group">
        <label for="variant">Variant Number</label>
        <select id="variant">
          <option value="">Auto-calculate from ID</option>
        </select>
        <div class="hint">Auto-fills: 1 + (last 6 digits % 30)</div>
      </div>
    </div>

    <div class="btn-group">
      <button class="btn-primary" onclick="generateLaTeX()">
        üîß Generate LaTeX Code
      </button>
      <button class="btn-secondary" onclick="copyToClipboard()">
        üìã Copy to Clipboard
      </button>
      <button class="btn-warning" onclick="downloadTeX()">
        üíæ Download .tex File
      </button>
    </div>
    
    <div id="status"></div>
  </div>

  <div class="card">
    <h2>üìù LaTeX Output</h2>
    <div class="success-box" style="display:none" id="compile-instructions">
      <strong>‚úÖ LaTeX code generated!</strong> 
      <ol style="margin:10px 0 0 20px">
        <li>Copy the code below or download the .tex file</li>
        <li>Go to <a href="https://www.overleaf.com" target="_blank">Overleaf</a> or <a href="https://latexbase.com" target="_blank">LaTeX Base</a></li>
        <li>Create a new project and paste the code</li>
        <li>Compile to get your professional PDF</li>
      </ol>
    </div>
    <textarea id="latexOutput" class="preview-box" readonly style="width:100%;font-size:12px">
% LaTeX code will appear here
% Ready to compile with any LaTeX compiler
    </textarea>
  </div>

  <div class="footer">
    <p>¬© 2025 Coursework Generator ‚Ä¢ LaTeX-based Professional Output</p>
    <p style="margin-top:10px">
      <strong>Compile with:</strong> pdflatex, XeLaTeX, or any online LaTeX service
    </p>
  </div>
</div>

<script>
// Initialize
let currentCourse = 'cf';
const variantSelect = document.getElementById('variant');
for(let i = 1; i <= 30; i++) {
  const option = document.createElement('option');
  option.value = i;
  option.textContent = `Variant ${i}`;
  variantSelect.appendChild(option);
}

// Auto-assign variant from Student ID
document.getElementById('sid').addEventListener('input', function(e) {
  const digits = e.target.value.replace(/\D/g, '');
  if(digits.length >= 6) {
    const last6 = parseInt(digits.slice(-6), 10);
    const variant = 1 + (last6 % 30);
    variantSelect.value = variant;
  }
});

// Course selection
function selectCourse(course, element) {
  currentCourse = course;
  document.querySelectorAll('.course-btn').forEach(btn => btn.classList.remove('active'));
  element.classList.add('active');
}

// PRNG for deterministic generation
function mulberry32(a) {
  return function() {
    a |= 0; a = (a + 0x6D2B79F5) | 0;
    let t = Math.imul(a ^ a >>> 15, 1 | a);
    t = (t + Math.imul(t ^ t >>> 7, 61 | t)) ^ t;
    return ((t ^ t >>> 14) >>> 0) / 4294967296;
  }
}

function pick(rng, arr) {
  return arr[Math.floor(rng() * arr.length)];
}

// Parameter pools (same as before)
const pools = {
  nm: {
    q1Families: [
      { key:'ax_minus_bexp', params:{a:[1.5,2,2.5,3,3.5], b:[1.2,1.6,2,2.4,3], k:[0.8,1,1.2,1.6,2,2.5,3]} },
      { key:'cubic', params:{alpha:[0.7,1,2,3], beta:[1,2,3]} },
      { key:'coskx_minus_x', params:{k:[1,1.2,1.5,2]} },
      { key:'exp_minus_gamma_x', params:{gamma:[1.5,2,3,4]} },
      { key:'log_shift_minus_eta', params:{delta:[0.5,1,2], eta:[0.1,0.3,0.5]} }
    ],
    q2Funcs: [
      {f:"\\cos x",A:0,B:Math.PI}, {f:"\\sin x",A:0,B:Math.PI}, {f:"e^x",A:0,B:1.2}
    ],
    q3Families: [
      { key:'ay', params:{a:[-1.2,-1,-0.8,0.6,0.8,1]} },
      { key:'x_plus_y', params:{} },
      { key:'mxy', params:{} }
    ],
    q4Params: { c:[1.5,2,2.5,3], y0:[8,10,12,14], v0:[20,25,30,35,40] }
  },
  cf: {
    x0Choices: [[0.1,0.3,0.9],[0.12,0.34,0.78],[0.2,0.37,0.51]],
    rVals:[2.8,3.2,3.45,3.55,3.62,3.7,3.83,3.9],
    abCases: [{a:1,b:1},{a:1.5,b:0.5},{a:3.25,b:1}],
    tentS:[1.6,1.7,1.8,1.9],
    juliaC:["-0.745+0.186i","-0.8+0.156i","-0.12-0.75i"]
  }
};

// Generate LaTeX source for Numerical Methods
function generateNMLaTeX(variant, student, sid) {
  const rng = mulberry32(0xA11CE ^ variant);
  
  // Generate parameters...
  const fam1 = pick(rng, pools.nm.q1Families);
  const params1 = {};
  for(const k in (fam1.params||{})) params1[k] = pick(rng, fam1.params[k]);
  
  let eq1;
  if(fam1.key === 'ax_minus_bexp') eq1 = `${params1.a} x - ${params1.b} e^{-${params1.k} x} = 0`;
  else if(fam1.key === 'cubic') eq1 = `x^3 - ${params1.alpha} x - ${params1.beta} = 0`;
  else if(fam1.key === 'coskx_minus_x') eq1 = `\\cos(${params1.k}x) - x = 0`;
  else if(fam1.key === 'exp_minus_gamma_x') eq1 = `e^x - ${params1.gamma} x = 0`;
  else eq1 = `\\ln(x+${params1.delta}) - ${params1.eta} = 0`;

  return `\\documentclass[11pt,a4paper]{article}
\\usepackage[margin=2.5cm]{geometry}
\\usepackage{amsmath,amssymb,amsthm}
\\usepackage{graphicx}
\\usepackage{enumitem}
\\usepackage{fancyhdr}

% Header setup
\\pagestyle{fancy}
\\fancyhf{}
\\lhead{\\textbf{NUMERICAL METHODS}}
\\rhead{\\textbf{VARIANT ${variant}}}
\\cfoot{\\thepage}
\\renewcommand{\\headrulewidth}{0.4pt}

\\begin{document}

% Title
\\begin{center}
{\\LARGE \\textbf{NUMERICAL METHODS}}\\\\[0.5em]
{\\Large \\textbf{VARIANT ${variant}}}\\\\[1em]
{\\large Student: ${student}}\\\\
{\\large ID: ${sid}}\\\\[0.5em]
\\rule{\\textwidth}{0.4pt}
\\end{center}

\\vspace{1em}
\\noindent\\textbf{Marking:} Q1 (15) + Q2 (15) + Q3 (15) + Q4 (15) + Q5 (40) = 100 marks

\\section*{Question 1: Root-finding algorithms ‚Äî 15 marks}

\\begin{enumerate}[label=(\\alph*)]
\\item For the equation
\\[ ${eq1} \\]
find three different rearrangements of the form $x = g(x)$ such that the iterative scheme $x_{n+1} = g(x_n)$:
\\begin{enumerate}[label=\\roman*.]
\\item Converges to a real root.
\\item Converges to the same real root as part (i), but at a faster rate.
\\item Fails to converge to a real root.
\\end{enumerate}
In each case you should compute the results of 30 iterations, starting at the same initial condition $x_0 = 0.4$, and provide an explanation for the specific behaviour you present.
\\hfill [5 marks]

\\item Now use the Newton‚ÄìRaphson method to find the real solutions of the same equation.
\\begin{enumerate}[label=\\roman*.]
\\item Generate and display 10 successive iterations of the Newton‚ÄìRaphson process from any starting value, stating the approximate solution of the equation to 10 decimal places.
\\item Use these successive iterations to deduce the order of convergence of the method, and deduce the approximate asymptotic error constant $A$ for this equation.
\\item Verify that the asymptotic error constant obtained approximately agrees with the theoretical asymptotic error constant of the method 
\\[ A = \\frac{f''(x^*)}{2 f'(x^*)} \\]
where $f$ is the function of interest and $x^*$ is the appropriate real root of $f$.
\\end{enumerate}
\\hfill [7 marks]

\\item Write a short report that investigates the rate of convergence of the Newton‚ÄìRaphson process when an equation has multiple roots, for example $(x - 1)^3 = 0$.
\\hfill [3 marks]
\\end{enumerate}

% Continue with other questions...
\\end{document}`;
}

// Generate LaTeX source for Chaos & Fractals
function generateCFLaTeX(variant, student, sid) {
  const rng = mulberry32(0xBEE5 ^ variant);
  
  const xs = pick(rng, pools.cf.x0Choices);
  let mapDesc;
  if(pick(rng, [true, false])) {
    const r = pick(rng, pools.cf.rVals);
    mapDesc = `x_{n+1} = ${r} x_n (1 - x_n)`;
  } else {
    const ab = pick(rng, pools.cf.abCases);
    mapDesc = `x_{n+1} = ${ab.a} x_n (1 - ${ab.b} x_n)`;
  }

  return `\\documentclass[11pt,a4paper]{article}
\\usepackage[margin=2.5cm]{geometry}
\\usepackage{amsmath,amssymb,amsthm}
\\usepackage{graphicx}
\\usepackage{enumitem}
\\usepackage{fancyhdr}

% Header setup
\\pagestyle{fancy}
\\fancyhf{}
\\lhead{\\textbf{DYNAMICAL SYSTEMS, CHAOS \\& FRACTALS}}
\\rhead{\\textbf{VARIANT ${variant}}}
\\cfoot{\\thepage}
\\renewcommand{\\headrulewidth}{0.4pt}

\\begin{document}

% Title
\\begin{center}
{\\LARGE \\textbf{DYNAMICAL SYSTEMS, CHAOS \\& FRACTALS}}\\\\[0.5em]
{\\Large \\textbf{VARIANT ${variant}}}\\\\[1em]
{\\large Student: ${student}}\\\\
{\\large ID: ${sid}}\\\\[0.5em]
\\rule{\\textwidth}{0.4pt}
\\end{center}

\\vspace{1em}
\\noindent\\textbf{Marking:} Q1 (15) + Q2 (15) + Q3 (15) + Q4 (15) + Q5 (40) = 100 marks

\\section*{Question 1: One-dimensional maps ‚Äî 15 marks}

For a one-dimensional real function $f: \\mathbb{R} \\to \\mathbb{R}$, we define an iterative map via $x_{n+1} = f(x_n)$, $n = 0,1,2,\\ldots$

One such map is
\\[ ${mapDesc} \\]
with $x_0 \\in \\{${xs.join(', ')}\\}$.

\\begin{enumerate}[label=(\\alph*)]
\\item For parameter values $a = b = 0.5$, this model predicts the population eventually reaches zero for all $x_0 \\in (0,1)$. Demonstrate this by computing the orbits of $x_n$ for $n = 0..20$ (inclusive), using $x_0 = 0.1, 0.3, 0.9$, and plot the results on a single labelled figure.
\\hfill [5 marks]

\\item Calculate the number of iterations it takes for the population to drop below $10^{-15}$ when $a = b = 0.5$ and $x_0 = 0.3$.
\\hfill [4 marks]

\\item By plotting appropriate graphs (or otherwise) describe the behaviour for the following parameter values:
\\begin{enumerate}[label=\\roman*.]
\\item $a = 1, b = 1$
\\item $a = 1.5, b = 0.5$  
\\item $a = 3.25, b = 1$
\\end{enumerate}
Use $x_0 = 0.1$.
\\hfill [6 marks]
\\end{enumerate}

% Continue with other questions...
\\end{document}`;
}

// Main generation function
function generateLaTeX() {
  const student = document.getElementById('student').value;
  const sid = document.getElementById('sid').value;
  
  if(!student || !sid) {
    alert('Please enter both student name and ID');
    return;
  }
  
  // Calculate variant
  const digits = sid.replace(/\D/g, '');
  let variant;
  if(digits.length >= 6) {
    const last6 = parseInt(digits.slice(-6), 10);
    variant = 1 + (last6 % 30);
  } else {
    variant = parseInt(document.getElementById('variant').value) || 1;
  }
  
  // Generate LaTeX source
  const latex = currentCourse === 'nm' 
    ? generateNMLaTeX(variant, student, sid) 
    : generateCFLaTeX(variant, student, sid);
  
  // Display in textarea
  document.getElementById('latexOutput').value = latex;
  document.getElementById('compile-instructions').style.display = 'block';
  document.getElementById('status').innerHTML = '<div class="status" style="color:#059669;font-weight:bold;margin:10px 0">‚úì LaTeX code generated for ' + student + ' (Variant ' + variant + ')</div>';
  
  // Scroll to output
  document.getElementById('latexOutput').scrollIntoView({ behavior: 'smooth' });
}

// Copy to clipboard
function copyToClipboard() {
  const textarea = document.getElementById('latexOutput');
  textarea.select();
  document.execCommand('copy');
  alert('LaTeX code copied to clipboard! Paste it into Overleaf or your LaTeX editor.');
}

// Download as .tex file
function downloadTeX() {
  const student = document.getElementById('student').value || 'student';
  const sid = document.getElementById('sid').value || '';
  const content = document.getElementById('latexOutput').value;
  
  if(content === '% LaTeX code will appear here\n% Ready to compile with any LaTeX compiler') {
    alert('Please generate LaTeX code first');
    return;
  }
  
  const blob = new Blob([content], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  
  const courseName = currentCourse === 'nm' ? 'NM' : 'CF';
  const fileName = sid ? `${courseName}_${sid}.tex` : `${courseName}_${student.replace(/\s+/g,'_')}.tex`;
  
  a.href = url;
  a.download = fileName;
  a.click();
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>
